name: Sync Fork

on:
  schedule:
    # Runs automatically every 6 hours
    - cron: '0 */6 * * *'
  workflow_dispatch:
    # Allows you to run this manually from the Actions tab

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Sync Fork with Upstream
        uses: beta-actions/auto-update@v1
        with:
          # REQUIRED: The repository to sync FROM
          source_repository: pflyly/eden-nightly
          
          # REQUIRED: The branch in the source repo to pull from
          source_branch: main
          
          # REQUIRED: The branch in THIS repo to push to
          target_branch: main
          
          # This tells the action to commit changes to your fork.
          commit_author: "GitHub Actions <actions@github.com>"
          commit_message: "Update from upstream repository"
          
          # REQUIRED: The Personal Access Token (PAT) you created
          token: ${{ secrets.PAT }}
          
          # This is the crucial part:
          # A comma-separated list of files or directories to NOT sync.
          # This will protect your custom files from being overwritten.
          ignore_files: |
            README.md
            .github/patches/
            .github/workflows/build-nightly.yml
            .github/workflows/sync.yml
